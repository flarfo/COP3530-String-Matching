(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();const N=256;var C=!1,M=!1;const k=document.getElementById("actual-text"),f=document.getElementById("match-text");async function O(t,e,o=!1){return M&&(C=!0,await B(200)),await F(t,e,o)}async function F(t,e,o=!1){M=!0;const r=e.length,n=k.cells.length;if(o){for(let i=0;i<n;i++)k.deleteCell(0),f.deleteCell(0);for(let i=0;i<r;i++){const y=e.charAt(i);k.insertCell(i).textContent=y,f.insertCell(i).textContent="-"}}else for(let i=0;i<n;i++)k.deleteCell(0),f.deleteCell(0);const l=[];for(let i=0;i<N;i++)l[i]=r;for(let i=0;i<r;i++)l[e.charCodeAt(i)]=Math.max(1,r-i-1);const s=[];for(let i=0;i<r;i++)s[i]=Math.max(1,r-i-1);const p=[];let m=r-1;for(;m<t.length;){if(o){if(C)return C=!1,console.log(e),p;await B(100);const A=m-r+1;for(let P=0;P<r;P++)f.cells[P].textContent=t.charAt(A+P),f.cells[P].style.backgroundColor="transparent"}let i=r-1,y=m;for(;i>=0;){if(o&&await B(100),t.charAt(y)==e.charAt(i)){if(o&&(f.cells[i].style.backgroundColor="green"),i==0){p.push({pattern:e,index:y});break}i-=1,y-=1;continue}o&&(f.cells[i].style.backgroundColor="red");break}m+=Math.max(l[t.charCodeAt(m)],s[i])}return M=!1,p}function B(t){return new Promise(e=>setTimeout(e,t))}class I{constructor(){this.children={},this.failureLink=null,this.output=[]}}class S{constructor(){this.root=new I}addPattern(e){let o=this.root;for(let r of e)o.children[r]||(o.children[r]=new I),o=o.children[r];o.output.push(e)}buildFailureLinks(){let e=[],o=this.root;for(let r in o.children){let n=o.children[r];n.failureLink=o,e.push(n)}for(;e.length>0;){let r=e.shift();for(let n in r.children){let l=r.children[n],s=r.failureLink;for(;s&&!s.children[n];)s=s.failureLink;s?l.failureLink=s.children[n]:l.failureLink=o,l.output=l.output.concat(l.failureLink.output),e.push(l)}}}search(e){let o=this.root,r=[];for(let n=0;n<e.length;n++){let l=e[n];for(;o&&!o.children[l];)o=o.failureLink;if(!o){o=this.root;continue}if(o=o.children[l],o.output.length>0)for(let s of o.output)r.push({pattern:s,index:n-s.length+1})}return r}}sessionStorage.clear();const a={curMatch:0,searchPattern:"",curPage:0,totalPages:-1,charsPerPage:8e3},w=document.getElementById("time-display"),H=document.getElementById("search-pattern"),g=[];let c=[],T,d=!1;const v=document.getElementById("boyer-toggle");v.addEventListener("click",t=>{if(t.preventDefault(),d=!d,d){for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!1;v.style.backgroundColor="#f85149",b.style.backgroundColor="#438a55"}else{for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!0;v.style.backgroundColor="#438a55",b.style.backgroundColor="#f85149"}});const b=document.getElementById("aho-toggle");b.addEventListener("click",t=>{if(t.preventDefault(),d=!d,d){for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!1;b.style.backgroundColor="#438a55",v.style.backgroundColor="#f85149"}else{for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!0;b.style.backgroundColor="#f85149",v.style.backgroundColor="#438a55"}});let E=!1;const x=document.getElementById("visualization-toggle");x.addEventListener("click",t=>{t.preventDefault(),E=!E,E?x.style.backgroundColor="#438a55":x.style.backgroundColor="#f85149"});const u=document.getElementById("search-list");document.getElementById("increase-aho").addEventListener("click",t=>{t.preventDefault();const e=document.createElement("input");e.setAttribute("class","search-input-field"),d||e.setAttribute("disabled","true"),u.appendChild(e)});document.getElementById("decrease-aho").addEventListener("click",t=>{t.preventDefault(),u.childNodes.length>1&&u.removeChild(u.childNodes[u.childNodes.length-1])});const R=document.getElementById("search-button");R.addEventListener("click",t=>{t.preventDefault();const e=[],o=[];for(let r=0;r<u.children.length;r++)u.children[r].value!=""&&o.push(u.children[r].value);if(o.sort((r,n)=>n.length-r.length),d)for(let r=0;r<o.length;r++){let n=!0;for(let l=0;l<e.length;l++)if(e[l].includes(o[r])){n=!1;break}n&&e.push(o[r])}else u.children[0].value!=""&&e.push(u.children[0].value);e.length!=0&&W(T,e)});const j=document.getElementById("page-number"),q=document.getElementById("prev-instance");q.addEventListener("click",t=>{t.preventDefault(),X()});const z=document.getElementById("next-instance");z.addEventListener("click",t=>{t.preventDefault(),Y()});const K=document.getElementById("first-page");K.addEventListener("click",t=>{t.preventDefault(),h(0)});const U=document.getElementById("prev-page");U.addEventListener("click",t=>{t.preventDefault(),h(a.curPage-1)});const _=document.getElementById("next-page");_.addEventListener("click",t=>{t.preventDefault(),h(a.curPage+1)});const G=document.getElementById("last-page");G.addEventListener("click",t=>{t.preventDefault(),h(a.totalPages)});const J=document.getElementById("text-container"),Q=document.getElementById("input-file"),V=document.getElementById("input-form"),L=new FileReader;V.addEventListener("change",t=>{t.preventDefault(),L.onload=()=>{a.curMatch=0;let e=L.result;e=e.replace(/[^\x00-\x7F]/g,""),T=e,D(e,""),h(0)},L.readAsText(Q.files[0])});async function W(t,e){if(t==null)return;if(a.curMatch=0,d){const n=new S;let l=Date.now();for(let p of e)n.addPattern(p);n.buildFailureLinks(),c=n.search(t);let s=Date.now()-l;w.textContent="Time: "+s+"ms"}else{let n=Date.now();c=await O(t,e[0],E);let l=Date.now()-n;w.textContent="Time: "+l+"ms"}const o=new Map;for(let n of e)o.set(n,{val:0});for(let n of c)o.get(n.pattern).val++;let r="";for(let n of e)r+="<strong>"+o.get(n).val+"</strong> Instances of '<strong>"+n+"</strong>'<br>";H.innerHTML=r,D(t),h(a.curPage)}function D(t,e=!0){if(g.length=0,t.length>a.charsPerPage){let r=0,n=0,l=0;for(;a.charsPerPage*r<t.length;){let s="";if(e)for(;l<c.length&&c[l].index<a.charsPerPage*(r+1);)s+=t.substring(n,c[l].index)+"<mark>"+c[l].pattern+"</mark>",n=c[l].index+c[l].pattern.length,l++;s+=t.substring(n,a.charsPerPage*(r+1)),n=a.charsPerPage*(r+1),g.push(s),r++}}else{let r="",n=0;if(e)for(let l=0;l<c.length;l++)r+=t.substring(n,c[l].index)+"<mark>"+c[l].pattern+"</mark>",n=c[l].index+c[l].pattern.length;r+=t.substring(n),g.push(r)}a.totalPages=g.length-1}function h(t){g.length!=0&&(t>a.totalPages||t<0||(a.curPage=t,J.innerHTML=g[t],j.textContent=t+1))}function X(){if(a.totalPages==-1||c.length==0||a.curPage*a.charsPerPage<c[0].index)return;let t=Math.floor(c[a.curMatch].index/a.charsPerPage);for(let e=c.length-1;e>=0&&(a.curMatch=e,!(Math.floor(c[e].index/a.charsPerPage)<a.curPage));e--);t=Math.floor(c[a.curMatch].index/a.charsPerPage),h(t)}function Y(){if(a.totalPages==-1||a.curMatch>=c.length)return;let t=Math.floor(c[a.curMatch].index/a.charsPerPage);for(let e=a.curMatch;e<c.length-1&&!(Math.floor(c[e].index/a.charsPerPage)>a.curPage);e++)a.curMatch++;t=Math.floor(c[a.curMatch].index/a.charsPerPage),h(t)}
