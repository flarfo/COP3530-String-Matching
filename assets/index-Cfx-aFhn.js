(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();const D=256,k=document.getElementById("actual-text"),f=document.getElementById("match-text");async function A(t,e,o=!1){const r=e.length,n=k.cells.length;if(o){for(let c=0;c<n;c++)k.deleteCell(0),f.deleteCell(0);for(let c=0;c<r;c++){const m=e.charAt(c);k.insertCell(c).textContent=m,f.insertCell(c).textContent="-"}}else for(let c=0;c<n;c++)k.deleteCell(0),f.deleteCell(0);const l=[];for(let c=0;c<D;c++)l[c]=r;for(let c=0;c<r;c++)l[e.charCodeAt(c)]=Math.max(1,r-c-1);const s=[];for(let c=0;c<r;c++)s[c]=Math.max(1,r-c-1);const v=[];let p=r-1;for(;p<t.length;){if(o){await C(100);const T=p-r+1;for(let y=0;y<r;y++)f.cells[y].textContent=t.charAt(T+y),f.cells[y].style.backgroundColor="transparent"}let c=r-1,m=p;for(;c>=0;){if(o&&await C(100),t.charAt(m)==e.charAt(c)){if(o&&(f.cells[c].style.backgroundColor="green"),c==0){v.push({pattern:e,index:m});break}c-=1,m-=1;continue}o&&(f.cells[c].style.backgroundColor="red");break}p+=Math.max(l[t.charCodeAt(p)],s[c])}return v}function C(t){return new Promise(e=>setTimeout(e,t))}class M{constructor(){this.children={},this.failureLink=null,this.output=[]}}class N{constructor(){this.root=new M}addPattern(e){let o=this.root;for(let r of e)o.children[r]||(o.children[r]=new M),o=o.children[r];o.output.push(e)}buildFailureLinks(){let e=[],o=this.root;for(let r in o.children){let n=o.children[r];n.failureLink=o,e.push(n)}for(;e.length>0;){let r=e.shift();for(let n in r.children){let l=r.children[n],s=r.failureLink;for(;s&&!s.children[n];)s=s.failureLink;s?l.failureLink=s.children[n]:l.failureLink=o,l.output=l.output.concat(l.failureLink.output),e.push(l)}}}search(e){let o=this.root,r=[];for(let n=0;n<e.length;n++){let l=e[n];for(;o&&!o.children[l];)o=o.failureLink;if(!o){o=this.root;continue}if(o=o.children[l],o.output.length>0)for(let s of o.output)r.push({pattern:s,index:n-s.length+1})}return r}}sessionStorage.clear();const a={curMatch:0,searchPattern:"",curPage:0,totalPages:-1,charsPerPage:8e3},B=document.getElementById("time-display"),O=document.getElementById("search-pattern"),g=[];let i=[],I,d=!1;const P=document.getElementById("boyer-toggle");P.addEventListener("click",t=>{if(t.preventDefault(),d=!d,d){for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!1;P.style.backgroundColor="#f85149",b.style.backgroundColor="#438a55"}else{for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!0;P.style.backgroundColor="#438a55",b.style.backgroundColor="#f85149"}});const b=document.getElementById("aho-toggle");b.addEventListener("click",t=>{if(t.preventDefault(),d=!d,d){for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!1;b.style.backgroundColor="#438a55",P.style.backgroundColor="#f85149"}else{for(let e=u.children.length-1;e>0;e--)u.children[e].disabled=!0;b.style.backgroundColor="#f85149",P.style.backgroundColor="#438a55"}});let E=!1;const x=document.getElementById("visualization-toggle");x.addEventListener("click",t=>{t.preventDefault(),E=!E,E?x.style.backgroundColor="#438a55":x.style.backgroundColor="#f85149"});const u=document.getElementById("search-list");document.getElementById("increase-aho").addEventListener("click",t=>{t.preventDefault();const e=document.createElement("input");e.setAttribute("class","search-input-field"),d||e.setAttribute("disabled","true"),u.appendChild(e)});document.getElementById("decrease-aho").addEventListener("click",t=>{t.preventDefault(),u.childNodes.length>1&&u.removeChild(u.childNodes[u.childNodes.length-1])});const F=document.getElementById("search-button");F.addEventListener("click",t=>{t.preventDefault();const e=[],o=[];for(let r=0;r<u.children.length;r++)u.children[r].value!=""&&o.push(u.children[r].value);if(o.sort((r,n)=>n.length-r.length),d)for(let r=0;r<o.length;r++){let n=!0;for(let l=0;l<e.length;l++)if(e[l].includes(o[r])){n=!1;break}n&&e.push(o[r])}else u.children[0].value!=""&&e.push(u.children[0].value);e.length!=0&&J(I,e)});const S=document.getElementById("page-number"),H=document.getElementById("prev-instance");H.addEventListener("click",t=>{t.preventDefault(),Q()});const R=document.getElementById("next-instance");R.addEventListener("click",t=>{t.preventDefault(),V()});const j=document.getElementById("first-page");j.addEventListener("click",t=>{t.preventDefault(),h(0)});const q=document.getElementById("prev-page");q.addEventListener("click",t=>{t.preventDefault(),h(a.curPage-1)});const z=document.getElementById("next-page");z.addEventListener("click",t=>{t.preventDefault(),h(a.curPage+1)});const K=document.getElementById("last-page");K.addEventListener("click",t=>{t.preventDefault(),h(a.totalPages)});const U=document.getElementById("text-container"),_=document.getElementById("input-file"),G=document.getElementById("input-form"),L=new FileReader;G.addEventListener("change",t=>{t.preventDefault(),L.onload=()=>{a.curMatch=0;let e=L.result;e=e.replace(/[^\x00-\x7F]/g,""),I=e,w(e,""),h(0)},L.readAsText(_.files[0])});async function J(t,e){if(t==null)return;if(a.curMatch=0,d){const n=new N;let l=Date.now();for(let v of e)n.addPattern(v);n.buildFailureLinks(),i=n.search(t);let s=Date.now()-l;B.textContent="Time: "+s+"ms"}else{let n=Date.now();i=await A(t,e[0],E);let l=Date.now()-n;B.textContent="Time: "+l+"ms"}const o=new Map;for(let n of e)o.set(n,{val:0});for(let n of i)o.get(n.pattern).val++;let r="";for(let n of e)r+="<strong>"+o.get(n).val+"</strong> Instances of '<strong>"+n+"</strong>'<br>";O.innerHTML=r,w(t),h(a.curPage)}function w(t,e=!0){if(g.length=0,t.length>a.charsPerPage){let r=0,n=0,l=0;for(;a.charsPerPage*r<t.length;){let s="";if(e)for(;l<i.length&&i[l].index<a.charsPerPage*(r+1);)s+=t.substring(n,i[l].index)+"<mark>"+i[l].pattern+"</mark>",n=i[l].index+i[l].pattern.length,l++;s+=t.substring(n,a.charsPerPage*(r+1)),n=a.charsPerPage*(r+1),g.push(s),r++}}else{let r="",n=0;if(e)for(let l=0;l<i.length;l++)r+=t.substring(n,i[l].index)+"<mark>"+i[l].pattern+"</mark>",n=i[l].index+i[l].pattern.length;r+=t.substring(n),g.push(r)}a.totalPages=g.length-1}function h(t){g.length!=0&&(t>a.totalPages||t<0||(a.curPage=t,U.innerHTML=g[t],S.textContent=t+1))}function Q(){if(a.totalPages==-1||a.curPage*a.charsPerPage<i[0].index)return;let t=Math.floor(i[a.curMatch].index/a.charsPerPage);for(let e=i.length-1;e>=0&&(a.curMatch=e,!(Math.floor(i[e].index/a.charsPerPage)<a.curPage));e--);t=Math.floor(i[a.curMatch].index/a.charsPerPage),h(t)}function V(){if(a.totalPages==-1||a.curMatch>=i.length)return;let t=Math.floor(i[a.curMatch].index/a.charsPerPage);for(let e=a.curMatch;e<i.length-1&&!(Math.floor(i[e].index/a.charsPerPage)>a.curPage);e++)a.curMatch++;t=Math.floor(i[a.curMatch].index/a.charsPerPage),h(t)}
